# release-s3
GitHub Action to upload objects to Amazon S3.
Intended to be used only as part of GH action `agilecustoms/release`

Main features:
- Set content type (MIME type) to serve files from "web-site" bucket
- Add object tags. Primary usecase: `Release=true`, `Release=false`. Non-release ones can be deleted after 30 days
- Ability to upload in several dirs to support semantic versioning: `/myservice/1.2.4`, `/myservice/1.2`, `/myservice/1`, `myservice/latest`
- To avoid clutter, the directories first cleaned up, and then files uploaded

## Usage
Code below is not a real _usage_, but rather a block of code from `release` action.
Parameters are not documented: part of them are inputs in `release` action, the other part is generated by `release` action.
```yaml
- name: Upload in S3
  if: steps.init.outputs.aws_s3
  uses: agilecustoms/release-s3@v1
  with:
    access-key-id: ${{ steps.login-aws.outputs.aws-access-key-id }}
    secret-access-key: ${{ steps.login-aws.outputs.aws-secret-access-key }}
    session-token: ${{ steps.login-aws.outputs.aws-session-token }}
    bucket: ${{ inputs.aws-s3-bucket }}
    bucket-dir: ${{ inputs.aws-s3-dir }}
    versions: ${{ steps.version.outputs.tags }}
    dev-release: ${{ inputs.dev-release }}
```
